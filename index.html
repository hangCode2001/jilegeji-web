<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #matrix-container {
            display: flex;
            align-items: center;
            border: 1px solid #000;
            /* è¾¹æ¡†ï¼Œæ›´æ¸…æ™°åœ°æ˜¾ç¤ºæ¯ä¸ªæ ¼å­ */
            flex-wrap: wrap;
            width: 860px;
        }
        .cell{
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: lightblue;
            border: 1px solid #000;
            width: 80px;
            height: 80px;
            margin: 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <div id="matrix-container"></div>
    <svg width="200" height="100" xmlns="http://www.w3.org/2000/svg">
        <!-- èˆ¹èº« -->
        <path d="M 75,75 Q 100,50 125,75 Q 115,75 100,60 Q 85,75 75,75" fill="#456"/>
        <!-- å‰å¸† -->
        <path d="M 100,60 L 110,75 L 100,75 Z" fill="#789"/>
        <!-- åå¸† -->
        <path d="M 100,60 L 90,75 L 100,75 Z" fill="#abc"/>
        <!-- èˆ¹å¸†çº¿ -->
        <line x1="100" y1="60" x2="100" y2="75" stroke="black" stroke-width="2"/>
      </svg>

    <script src="./index.js"></script>
    <script>
        const directionMap = 
        {
            'UP':'ä¸Š',
            'DOWN':'ä¸‹',
            'LEFT_UP':'å·¦ä¸Š',
            'RIGHT_UP':'å³ä¸Š',
            'LEFT_DOWN':'å·¦ä¸‹',
            'RIGHT_DOWN':'å³ä¸‹'
        }
        const matrixContainer = document.getElementById('matrix-container');
        const gridSize = Line_Number; // ç½‘æ ¼å¤§å°ä¸º8x8

        // åˆå§‹åŒ–8x8çš„ç½‘æ ¼
        for (let i = 0; i < gridSize; i++) {
            for (let j = 0; j < gridSize; j++) {
                const cell = document.createElement('div');
                cell.classList.add('cell'); // æ·»åŠ cellç±»ï¼Œå¦‚æœéœ€è¦çš„è¯
                matrixContainer.appendChild(cell);
            }
        }

        // åœ¨ç½‘æ ¼ä¸­æ”¾ç½®èˆ¹åª
        graph.ships.forEach(ship => {
            const { positions } = ship; // è·å–èˆ¹åªçš„ä½ç½®
            positions.forEach(position => {
                const index = position[0] * gridSize + position[1]; // è®¡ç®—èˆ¹åªåœ¨ç½‘æ ¼ä¸­çš„ç´¢å¼•
                const shipDiv = document.createElement('div');
                shipDiv.classList.add('ship');
                shipDiv.style.backgroundColor = ship.color; // è®¾ç½®èˆ¹åªçš„é¢œè‰²
                shipDiv.textContent = ship.id+' '+directionMap[ship.direction]; // ä½¿ç”¨èˆ¹åªå›¾æ ‡æˆ–å…¶ä»–å†…å®¹æ ‡è¯†èˆ¹åª
                shipDiv.id = ship.id;
                matrixContainer.children[index].appendChild(shipDiv); // å°†èˆ¹åªæ·»åŠ åˆ°å¯¹åº”çš„ç½‘æ ¼ä¸­
            })
        });

        matrixContainer.addEventListener('click', (event) => {
            const clickedCell = event.target;
            const id = clickedCell.id;
            console.log("%c Line:78 ğŸ† id", "color:#3f7cff", id);
            const edges=graph.edgeList.get(Number(id));
            console.log("%c Line:76 ğŸ” edges", "color:#ea7e5c", edges);
            if(edges.length===0){
                graph.removeShip(Number(id))
                clickedCell.remove();
            }
            else {
                console.log("%c Line:80 ğŸ¥ æœ‰é˜»æŒ¡", "color:#ff4f4f", edges);
            }
        });

    </script>
</body>

</html>